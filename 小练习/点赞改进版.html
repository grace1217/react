<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ç‚¹èµæ”¹è¿›ç‰ˆ</title>
</head>
<body>
	<p>æ‰‹åŠ¨ç®¡ç†æ•°æ®å’ŒDOMä¹‹é—´çš„å…³ç³»ä¼šå¯¼è‡´ä»£ç å¯ç»´æŠ¤æ€§å˜å·®ã€å®¹æ˜“å‡ºé”™ã€‚æ‰€ä»¥ä¸‹ä¸€æ­¥çš„ä¼˜åŒ–æ˜¯ï¼šå¦‚ä½•å°½é‡å‡å°‘è¿™ç§æ‰‹åŠ¨ DOM æ“ä½œ</p>
	<div>æå‡ºä¸€ç§è§£å†³æ–¹æ¡ˆï¼šä¸€æ—¦çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå°±é‡æ–°è°ƒç”¨ render æ–¹æ³•ï¼Œæ„å»ºä¸€ä¸ªæ–°çš„ DOM å…ƒç´ ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯åœ¨renderæ–¹æ³•é‡Œé¢ä½¿ç”¨æœ€æ–°çš„this.stateæ¥æ„é€ ä¸åŒHTMLç»“æ„çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ªå­—ç¬¦ä¸²æ„é€ ä¸åŒçš„ DOM å…ƒç´ ã€‚é¡µé¢å°±æ›´æ–°äº†</div>
	<div class="wrapper">
		
	</div>
</body>
<script type="text/javascript">
	const createDOMFromString = (domString)=>{
		const div = document.createElement('div')
		div.innerHTML = domString
		return div
	}

	class LikeButton {
		constructor (){
			this.state = {isLiked: true}
		}

		setState (state){
			const oldEl = this.el
			this.state = state
			this.el = this.render()
			if(this.onStateChange) this.onStateChange(oldEl, this.el)
		}

		changeLikeText(){
			this.setState({
				isLiked: !this.state.isLiked
			})
		}
		render (){
			this.el = createDOMFromString(`
				<button class="like-btn">
					<span class="like-text">${this.state.isLiked ? 'å–æ¶ˆ': 'ç‚¹èµ'}</span>
					<span>ğŸ‘</span>
				</button>`
			)
			this.el.addEventListener('click',this.changeLikeText.bind(this),false)
			return this.el
		}
	}
	/*å­˜åœ¨é—®é¢˜ï¼šrenderä¸ä¼šæ ¹æ®stateä¸åŒé‡æ„DOM è§£å†³æ–¹æ³•ï¼šéœ€è¦é‡æ–°æ¸²æŸ“DOM  ç”¨æˆ·æ¯æ¬¡ç‚¹å‡»ï¼ŒchangeLikeText éƒ½ä¼šè°ƒç”¨æ”¹å˜ç»„ä»¶çŠ¶æ€ç„¶åè°ƒç”¨ setState ï¼›setState ä¼šè°ƒç”¨ render ï¼Œrender æ–¹æ³•ä¼šæ ¹æ® state çš„ä¸åŒé‡æ–°æ„å»ºä¸åŒçš„ DOM å…ƒç´ */
	const wrapper = document.querySelector('.wrapper')
	const likeButton1 = new LikeButton()
	wrapper.appendChild(likeButton1.render())
	likeButton1.onStateChange = (oldEl, newEl) => {
		wrapper.insertBefore(newEl, oldEl)
		wrapper.removeChild(oldEl)
	}
</script>
</html>